# [Base64究竟是一个什么东西]

:::tip
2018年12月26日
简单聊一聊 Base64
:::

根据维基百科的定义，`Base64 是一种基于64个可打印字符来表达二进制数据的表示方式。因为 2^6 = 64，所以每6个比特为一个单元，对应某个可打印的字符`。

举个简单的例子——

转换的时候，将 **3字节** 的数据，先后放入一个 **24位** 的缓冲区中，先来的字节占高位。数据不足 3字节，于缓冲器中剩下的比特用0补足。接下来，每次取出 **6比特** （因为 2^6=64），然后按照其值选择 `ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/` 中的字符作为编码后的输出，直到全部输入数据转完成。

*Base64 中的可打印字符包括 `A-Za-z0-9+/` 共64字符，`=` 用作后缀用途。*

如果要编码的字节数不能被3整除，最后会多出 1个或2个字节，那么可以使用下面的方法进行处理：先使用 0 字节值在末尾补足，使其能够被 3 整除，然后再进行 Base64 编码。在编码后的 Base64文本后加上一个或两个 `=`，代表补足的字节数。

Base64常用于在通常处理文本数据的场合，表示、传输、存储一些二进制数据，包括MIME的电子邮件及XML的一些复杂数据。

Base64 编码后的数据会比原始数据略长，为原来的 4/3。

*char 类型的长度为 1个字节，所以我们使用 4个字节 去代表原先的 3个字节*

二进制文件转为 Base64 的方法有很多，据不完全统计（即笔者遇到过的）——<br>
```ts
// 一般的方式，是借助 FileReader 对象和 readAsDataURL
const blobToBase64 = async(blob:Blob) => {
  const reader = new FileReader();
  return new Promise((resolve:any) => {
    reader.addEventListener('load', () => {
      resolve(reader.result);
    });
    reader.readAsDataURL(blob);
  });
}

let str = 'A';

// 如果是图片

```
